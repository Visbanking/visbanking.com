extends layout.pug

block meta
    meta(name="description", content="")
    meta(name="keywords", content="")

block styles 
    link(rel="stylesheet", href="/css/insights.css")

block main
    h1 Insights
    section#top
        each post in posts.slice(0, 6)
            a(href=`/insights/insight/${post.ID}`)
                article.post(id=post.ID)
                    div 
                        img(src=post.Image, alt=post.Title)
                    p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                    h3 #{post.Title}
                    p.date #{post.Date.toDateString()}
    section#latest
        h2 Latest
        button(:class="{ active:business }", @click="showBusiness") Business
        button(:class="{ active:banks }", @click="showBanks") Banks
        button(:class="{ active:financial }", @click="showFinancial") Financial
        button(:class="{ active:market }", @click="showMarket") Market
        button(:class="{ active:politics }", @click="showPolitics") Politics
        aside.articles(v-if="business")
            each post in business
                a(href=`/insights/insight/${post.ID}`)
                    article.post(id=post.ID)
                        div 
                            img(src=post.Image, alt=post.Title)
                        p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                        h3 #{post.Title}
                        p.date #{post.Date.toDateString()}
        aside.articles(v-if="banks")
            each post in banks
                a(href=`/insights/insight/${post.ID}`)
                    article.post(id=post.ID)
                        div 
                            img(src=post.Image, alt=post.Title)
                        p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                        h3 #{post.Title}
                        p.date #{post.Date.toDateString()}
        aside.articles(v-if="financial")
            each post in financial
                a(href=`/insights/insight/${post.ID}`)
                    article.post(id=post.ID)
                        div 
                            img(src=post.Image, alt=post.Title)
                        p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                        h3 #{post.Title}
                        p.date #{post.Date.toDateString()}
        aside.articles(v-if="market")
            each post in market
                a(href=`/insights/insight/${post.ID}`)
                    article.post(id=post.ID)
                        div 
                            img(src=post.Image, alt=post.Title)
                        p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                        h3 #{post.Title}
                        p.date #{post.Date.toDateString()}
        aside.articles(v-if="politics")
            each post in politics
                a(href=`/insights/insight/${post.ID}`)
                    article.post(id=post.ID)
                        div 
                            img(src=post.Image, alt=post.Title)
                        p.topics #{post.Topics.split(",")[0][0].toUpperCase()+post.Topics.split(",")[0].slice(1)}
                        h3 #{post.Title}
                        p.date #{post.Date.toDateString()}

block scripts 
    script(src="/js/insights.js") 